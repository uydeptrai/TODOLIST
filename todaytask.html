<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>TODAY Task Schedule</title>
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="todaystyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="todaytask.js"></script>
    <link href="image/todologo.png" rel="icon">

    
    <!-- share -->
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet"
        id="bootstrap-css">
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- modal-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body   onload="taskListRequest()">
    <div  class="wrapper">
        <header>
            <img src="./image/todologo.png" style="margin-left:185px; width: 90px;position:relative; margin-bottom: 20px; " alt="">
        </header>
        <div>
            <nav style="display: flex; margin-left: -60px;" class="navigation ">
                <div class="modal fade" id="shareModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Share task</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <!-- Modal body -->
                            <div class="modal-body">
                                <form>
                                    <div class="form-group">
                                        <label for="name">Choose username to share:</label>
                                        <select id="users_list">
                                            <option value="" disabled selected hidden> -- Choose user -- </option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <!-- Modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-success" data-dismiss="modal"
                                    id="share_btn">Share</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-left: 50px;"  class="dropdown">
                    
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    </div>
                </div>

                <div>

                    <button style="border:3px solid black;border-radius: 10px;" class="btn btn-light"data-toggle="modal" data-target="#editModal1">
                        Change Name
                    </button>
                </div>
                <div style="margin-left: 5px;margin-left: 10px;" class="dropdown">
                    <a href="./resetpass.html"><button style="border:3px solid black;border-radius: 10px;" class="btn btn-light">Change Password</button></a>
                    </div>
                <div>
                    <button style="border:3px solid black;margin-left: 10px;border-radius: 10px;" class="btn btn-light"title="Share this content" data-toggle="modal" data-target="#myModal">
                        Share
                    </button>
                </div>
                <div style="margin-left: 5px;margin-left: 10px;" class="dropdown">
                <button style="border:3px solid black;border-radius: 10px;  " class="btn btn-light" id="logoutbutton">Log Out</button>
                </div>
                
    </nav>

            <div >
                <p style="font-size: 30px;margin-top: 20px;position: absolute;font-weight: 600;">Hi,</p>
                <span style="font-size: 30px;text-align: center;margin-top: 20px;position: absolute;margin-left: 40px;font-weight: 600;"  class="dark-color" id="nameouser">
                </span>
            </div>

        </div>

        <div style="margin-top: 20px;">
            <input style="width: 80%;height: 34px;border-radius: 10px;margin-left: 9px;margin-top: 50px;border: 3px solid black;" type="text" id='createTaskname' placeholder="&nbsp;&nbsp;&nbsp;Enter New Task">
            <button style="height: 35px;width: 64px;border-radius: 10px;border: 3px solid black;" data-dismiss="modal" onclick="return createTask()" ><i class="fas fa-plus"></i></button>
 
        </div>

        <div style="position:absolute;margin-left:290px;margin-top:30px;">

        </div>
        <ul class="table" style=" margin-top: 20px;">
            <table style="border-radius: 10px;" class="table" id="tasklist">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Task name</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="inputtask">
                </tbody>
            </table>
        </ul>
    </div>
    <div class="modal fade" id="editModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Edit task</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div>
                        <form>
                            Name Task
                            <input type="text" id="edittaskname">
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" id="edittask">Confirm</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <div class="modal fade" id="deleteModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Delete task</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div>
                        <form>
                            Do you really want to delete this task?
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" id="deletetask">Confirm</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>



                                        <!-- Modal -->
                                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
                                            aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal"><span
                                                                aria-hidden="true">Ã—</span><span
                                                                class="sr-only">Close</span></button>
                                                        <h4 class="modal-title" id="myModalLabel"> </h4>
                                                    </div>
                                                    <div class="modal-body">


                                                        <p>Invite people via Gmail.</p>

                                                        <form action="" method="post">
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i
                                                                        class="fa fa-envelope"></i></span>
                                                                <input type="email" class="form-control"
                                                                    placeholder="your@email.com">
                                                            </div>
                                                            <br />
                                                            <button type="submit" value="sub" name="sub"
                                                                class="btn btn-secondary">Invite!</button>
                                                        </form>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-default"
                                                            data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            

            <!-- Modal -->



            <div class="modal fade" id="editModal1" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Edit information</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div>
                                <form class="" method="post" action="#">
            
                                    <div class="form-group">
                                        <label for="name">User name</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" name="name" id="nameuser"
                                                placeholder="Enter your Name" />
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal"
                                onclick="return updateUserName()">SUBMIT</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
</body>

<script>
    document.getElementById("nameouser").innerHTML = localStorage.getItem("name");

const updateUserName = async () => {

    let name = document.getElementById("nameuser").value;
    localStorage.setItem("name", name);
    const response = await fetch('https://dev.thanqminh.com:3001/auth',  {
        method: 'PATCH',
        headers: {
            'Access-Token': jwt,
            'UID': uid,
            'Client': client,
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            name
        })
    });
    alert('Edit name successfully');
            document.location.reload();
  
}
</script>
<script>
    var name = localStorage.getItem('name');

    document.getElementById("nameouser").innerHTML = name;
</script>

<script src="logout.js"></script>
<script src="main.js"></script>


</html>